"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getImageMetadata = void 0;

const getImageMetadata = async (image, resourcePath, cache) => {
  const cacheMetadataKey = ['meta', resourcePath];
  const cachedMetadata = await cache.readJson(cacheMetadataKey);

  if (cachedMetadata !== undefined) {
    return cachedMetadata;
  }

  const meta = await image.metadata();
  await cache.writeJson(cacheMetadataKey, meta);
  return meta;
};

exports.getImageMetadata = getImageMetadata;
//# sourceMappingURL=getImageMetadata.js.map