{"version":3,"sources":["../../src/internal/createImageObject.ts"],"names":["createImageObject","input","meta","options","context","loader","n","type","mime","getType","result","format","width","height","undefined","name","scale"],"mappings":";;;;;;;AAAA;;AAKA;;;;AAEA,MAAMA,iBAAiB,GAAG,CACxBC,KADwB,EAExBC,IAFwB,EAGxBC,OAHwB,EAIxBC,OAJwB,EAKxBC,MALwB,KAMR;AAChB,QAAMC,CAAC,GAAG,yBAAWL,KAAX,EAAkBC,IAAlB,EAAwBC,OAAxB,EAAiCC,OAAjC,EAA0CC,MAA1C,CAAV;;AACA,QAAME,IAAI,GAAGC,cAAKC,OAAL,CAAaH,CAAb,CAAb;;AACA,QAAMI,MAAmB,GAAG;AAC1BC,IAAAA,MAAM,EAAET,IAAI,CAACS,MADa;AAE1BC,IAAAA,KAAK,EAAEV,IAAI,CAACU,KAFc;AAG1BC,IAAAA,MAAM,EAAEX,IAAI,CAACW,MAHa;AAI1BN,IAAAA,IAAI,EAAEA,IAAF,aAAEA,IAAF,cAAEA,IAAF,GAAUO,SAJY;AAK1BC,IAAAA,IAAI,EAAET;AALoB,GAA5B;;AAOA,MAAI,OAAOH,OAAO,CAACa,KAAf,KAAyB,QAA7B,EAAuC;AACpCN,IAAAA,MAAM,CAACE,KAAR,IAA4BT,OAAO,CAACa,KAApC;AACCN,IAAAA,MAAM,CAACG,MAAR,IAA6BV,OAAO,CAACa,KAArC;AACD;;AACD,SAAON,MAAP;AACD,CArBD;;eAuBeV,iB","sourcesContent":["import mime from 'mime';\n\nimport sharp from 'sharp';\nimport {ImageObject, ImageOptions} from '../types';\n\nimport createName from './createName';\n\nconst createImageObject = (\n  input: Buffer,\n  meta: sharp.OutputInfo,\n  options: ImageOptions,\n  context: string,\n  loader: any,\n): ImageObject => {\n  const n = createName(input, meta, options, context, loader);\n  const type = mime.getType(n);\n  const result: ImageObject = {\n    format: meta.format,\n    width: meta.width,\n    height: meta.height,\n    type: type ?? undefined,\n    name: n,\n  };\n  if (typeof options.scale === 'number') {\n    (result.width as number) /= options.scale;\n    (result.height as number) /= options.scale;\n  }\n  return result;\n};\n\nexport default createImageObject;\n"],"file":"createImageObject.js"}